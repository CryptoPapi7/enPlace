# 2026-02-13 - Expo Router Migration & Cook Mode Redesign

## Summary
Completed major navigation migration from React Navigation to Expo Router. Fixed numerous routing issues and redesigned the cooking experience.

## Completed Changes

### Navigation Migration (Expo Router)
- âœ… HomeScreen - converted to Expo Router
- âœ… CookScreen/CookLauncherScreen - converted
- âœ… RecipeLibraryScreen - converted
- âœ… PlanWeekScreen - converted (fixed duplicate import bug)
- âœ… RecipeScreen - converted with `[id].tsx` route
- âœ… ShoppingScreen - converted

### Tab Structure (5 tabs)
- âœ… Home - main landing
- âœ… Library - browse all recipes
- âœ… Plan - weekly planning
- âœ… Cook - My Kitchen launcher
- âœ… Grocery - shopping list
- âœ… Removed: Explore tab (was a tangent)

### UI Improvements
- âœ… Tab bar styling - matches app background (#FFF8E7)
- âœ… Reordered tabs: Library before Plan
- âœ… Recipe detail screen - header hidden
- âœ… Cook mode - full screen focus mode (no tabs)

### Cook Mode Redesign
New full-screen cooking experience with:
- Exit (âœ•) button - returns to My Kitchen
- Progress bar with step indicator
- Voice button (ðŸ”Š) - text-to-speech
- Step dots navigation
- Orange navigation bar

## TTS Discovery - FOUND
Retrieved complete TTS implementation from commit `54144c3`:
- **API**: Custom TTS server via `EXPO_PUBLIC_TTS_URL`
- **Auth**: `x-enplace-secret` header with `EXPO_PUBLIC_ENPLACE_SECRET`
- **Request**: POST with `{ text }` payload
- **Response**: MP3 audio data (arrayBuffer)
- **Playback**: Base64 â†’ `expo-av` Audio.Sound
- **Issue**: Environment variables lost, .env files not found in repo
- **Current**: Using basic `expo-speech` (robotic) as fallback

## Pending
- Restore GPT TTS server integration (needs API endpoint)
- Test all navigation flows end-to-end

## Files Modified
- app/app/(tabs)/_layout.tsx
- app/app/(tabs)/cook.tsx
- app/app/(tabs)/library.tsx
- app/app/(tabs)/plan.tsx
- app/app/(tabs)/grocery.tsx
- app/app/(tabs)/index.tsx
- app/app/recipe/[id].tsx
- app/app/cooking.tsx
- app/app/_layout.tsx
- app/screens/HomeScreen.tsx
- app/screens/CookScreen.tsx
- app/screens/CookLauncherScreen.tsx
- app/screens/RecipeLibraryScreen.tsx
- app/screens/RecipeScreen.tsx
- app/screens/PlanWeekScreen.tsx
- app/screens/ShoppingScreen.tsx